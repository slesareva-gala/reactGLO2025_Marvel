"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[768],{605:(e,a,s)=>{s.d(a,{A:()=>c});var r=s(8502),t=s(1425),n=s(579);const c=(e,a,s)=>{switch(e.replace(/\d/g,"")){case"waiting":case"loading":return(0,n.jsx)(r.A,{});case"confirmed":return(0,n.jsx)(a,{data:s});case"error":return(0,n.jsx)(t.A,{});default:throw new Error("Unexpected process state")}}},941:(e,a,s)=>{s.r(a),s.d(a,{default:()=>k});var r=s(5043),t=s(1591),n=s(605);var c=s(9696);const i=s.p+"static/media/mjolnir.61f31e1809f12183a524.png";var o=s(579);const l=(0,r.memo)((()=>{const[e,a]=(0,r.useState)(null),[s,t]=(0,r.useState)(!0),{getRandomCharacters:l}=(0,c.U)(),{processing:d,getBuffer:m,updateBuffer:u}=(e=>{let{qtyMin:a=3,qtyLimit:s=10,getData:t}=e;const[n,c]=(0,r.useState)("waiting"),i=(0,r.useRef)([]),o=(0,r.useRef)(0);a=Math.max(1,a),s=Math.min(100,Math.max(1,s));const l=e=>{i.current=e.length?i.current.concat(e):[null],o.current-=s};return{processing:n,getBuffer:()=>{const e=i.current.length,a=e?i.current[e-1]:null;return c(a?"confirmed":e?"error":"waiting"),e&&(i.current=i.current.slice(0,e-1)),a},updateBuffer:()=>{t?i.current.length+o.current<a&&(o.current+=s,t(s).then((e=>l(e))).catch((e=>l([])))):l([])}}})({qtyMin:3,qtyLimit:10,getData:e=>l(e)});(0,r.useEffect)((()=>{_()}),[s]),(0,r.useEffect)((()=>{const e=setInterval((()=>_()),5e3);return()=>clearInterval(e)}));const _=()=>{s&&e&&"error"!==d||(a(m()),u())},p=s?"Show others":"I choose",g="button "+("waiting"===d||"error"===d?"button__secondary":"button__main");return(0,o.jsxs)("div",{className:"randomchar",children:[(0,n.A)(d,h,{char:e,selected:s}),(0,o.jsxs)("div",{className:"randomchar__static",children:[(0,o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,o.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,o.jsx)("button",{className:g,onClick:()=>{t((e=>!e))},children:(0,o.jsx)("div",{className:"inner",children:p})}),(0,o.jsx)("img",{src:i,alt:"mjolnir",className:"randomchar__decoration"})]})]})})),h=e=>{let{data:a}=e;const{char:s,selected:r}=a,{id:t,name:n,description:c,thumbnail:i,homepage:l,wiki:h}=s,d="button "+(r?"button__main":"button__secondary"),m=((e,a)=>{let s=e.trim().replace(/\s+/g," ")||"no information available";return s.length>a&&(s=s.slice(0,a-3).match(/.+(?=\s)/g)+"..."),s})(c,210);return(0,o.jsxs)("div",{className:"randomchar__block",children:[(0,o.jsx)("img",{src:i,alt:n,className:"randomchar__img"}),(0,o.jsxs)("div",{className:"randomchar__info",children:[(0,o.jsx)("p",{className:"randomchar__name",children:n}),(0,o.jsx)("p",{className:"randomchar__descr",children:m}),(0,o.jsxs)("div",{className:"randomchar__btns",children:[(0,o.jsx)("a",{href:l,className:d,children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:h,className:d,children:(0,o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]},t)},d=l;var m=s(9391),u=s(3523);const _=e=>{let{charId:a,onCharSelected:s,setRefApp:t,onFocusTo:i}=e;const{processing:l,setProcessing:h,getAllCharacters:d,charsMarvel:_,offsetCharsBeginMarvel:p}=(0,c.U)(),[g,x]=(0,r.useState)([]),[f,j]=(0,r.useState)(p);(0,r.useEffect)((()=>{v()}),[]);const v=()=>{d(f).then(b)},b=e=>{x((a=>[...a,...e.filter((e=>a.findIndex((a=>a.id===e.id))<0))])),j(f+9),h("confirmed")},N=`button ${"loading"===l?"button__secondary":"button__main"} button__long`,w="loading"===l?{width:"unset"}:{};return(0,o.jsxs)("div",{className:"char__list",children:[(e=>{const r=e.map((e=>{const{id:r,name:n,thumbnail:c}=e,l=r===a,h="char__item "+(l?"char__item_selected":"");return(0,o.jsx)(m.A,{timeout:300,classNames:"char__item",children:(0,o.jsx)("li",{className:h,children:(0,o.jsxs)("button",{ref:e=>l?t("CharList",e):null,onClick:()=>s(r),onKeyDown:e=>"ArrowRight"===e.code&&l?i("CharInfo"):null,children:[(0,o.jsx)("img",{src:c,alt:n}),(0,o.jsx)("div",{className:"char__name",children:n})]})},r)},r)}));return(0,o.jsx)("ul",{className:"char__grid",children:(0,o.jsx)(u.A,{component:null,children:r})})})(g),(e=>{switch(e){case"confirmed":return null;case"error429":return(0,o.jsx)("span",{className:"char__error_message",children:"You have exceeded your rate limit.  Please try again later."});default:return(0,n.A)(e)}})(l),"error429"===l||"loading"===l||f>_-1?null:(0,o.jsx)("button",{className:N,onClick:v,style:w,children:(0,o.jsx)("div",{className:"inner",children:"load more"})})]})};var p=s(2582);const g=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,o.jsxs)("div",{className:"skeleton",children:[(0,o.jsxs)("div",{className:"pulse skeleton__header",children:[(0,o.jsx)("div",{className:"pulse skeleton__circle"}),(0,o.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,o.jsx)("div",{className:"pulse skeleton__block"}),(0,o.jsx)("div",{className:"pulse skeleton__block"}),(0,o.jsx)("div",{className:"pulse skeleton__block"})]})]}),x=e=>{let{data:a}=e;const{char:s,comicsMax:r,setRefApp:t,onFocusTo:n}=a,{id:c,name:i,description:l,thumbnail:h,homepage:d,wiki:m,comics:u}=s,_=Math.min(u.length,r);return u.length=_,(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"char__basics",children:[(0,o.jsx)("img",{src:h,alt:i}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"char__info-name",children:i}),(0,o.jsxs)("div",{className:"char__btns",children:[(0,o.jsx)("a",{href:d,ref:e=>t("CharInfo",e),className:"button button__main",onKeyDown:e=>"ArrowLeft"===e.code?n("CharList"):null,children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:m,className:"button button__main",onKeyDown:e=>"ArrowLeft"===e.code?n("CharList"):null,children:(0,o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]},c),(0,o.jsx)("div",{className:"char__descr",children:l}),(0,o.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,o.jsxs)("ul",{className:"char__comics-list",children:[_>0?null:"There is no comics with this character",u.map(((e,a)=>{const s=e.resourceURI.match(/\d+$/)[0];return(0,o.jsx)("li",{className:"char__comics-item",onKeyDown:e=>"ArrowLeft"===e.code?n("CharList"):null,children:(0,o.jsx)(p.N_,{to:`/reactGLO2025_Marvel/comics/${s}`,children:e.name})},a)}))]})]})},f=e=>{let{charId:a,setRefApp:s,onFocusTo:t,comicsMax:i=10}=e;const[l,h]=(0,r.useState)(0),{processing:d,setProcessing:m,getCharacter:u}=(0,c.U)();(0,r.useEffect)((()=>_()),[a]);const _=()=>{a&&u(a).then(p)},p=e=>{h(e),m(e?"confirmed":"error")};return(0,o.jsx)("div",{className:"char__info",children:(e=>"waiting"===e?(0,o.jsx)(g,{}):(0,n.A)(e,x,{char:l,comicsMax:i,setRefApp:s,onFocusTo:t}))(d)})};var j=s(3892),v=s(899);const b=()=>{const[e,a]=(0,r.useState)(null),{processing:s,setProcessing:t,getCharacterByName:i}=(0,c.U)(),l=e=>{a(e),t(e.length>0?"confirmed":"notfound")},h="button "+("confirmed"===s||"loading"===s||s.includes("error")?"button__secondary":"button__main");return(0,o.jsxs)("div",{className:"char__search-form",children:[(0,o.jsx)(j.l1,{initialValues:{charName:""},validationSchema:v.Ik({charName:v.Yj().required("This field is required")}),onSubmit:e=>{let{charName:a}=e;i(a).then(l)},children:(0,o.jsxs)(j.lV,{children:[(0,o.jsx)("label",{className:"char__search-label",htmlFor:"charName",children:"Or find a character by name:"}),(0,o.jsxs)("div",{className:"char__search-wrapper",children:[(0,o.jsx)(j.D0,{id:"charName",name:"charName",type:"text",placeholder:"Enter name",onInput:e=>t("waiting")}),(0,o.jsx)("button",{type:"submit",className:h,children:(0,o.jsx)("div",{className:"inner",children:"find"})})]}),(0,o.jsx)(j.Kw,{component:"div",className:"char__search-error",name:"charName"})]})}),(a=>{switch(a){case"waiting":return null;case"notfound":return(0,o.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"});case"confirmed":return(0,o.jsxs)("div",{className:"char__search-wrapper",children:[(0,o.jsxs)("div",{className:"char__search-success",children:["There is! Visit ",e[0].name," page?"]}),(0,o.jsx)(p.N_,{to:`/reactGLO2025_Marvel/characters/${e[0].id}`,className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"To page"})})]});default:return(0,n.A)(a)}})(s)]})};var N=s(1425);class w extends r.Component{constructor(){super(...arguments),this.state={error:!1}}static getDerivedStateFromError(e){return{error:!0}}componentDidCatch(e,a){}render(){return this.state.error?this.props.fallback?this.props.fallback:(0,o.jsx)(N.A,{}):this.props.children}}const y=w,C=s.p+"static/media/vision.067d4ae1936d64a577ce.png",k=()=>{const[e,a]=(0,r.useState)(0),s=(0,r.useRef)({}),n=(e,a)=>{s[e]=a},c=e=>{s[e]&&s[e].focus()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.m,{children:[(0,o.jsx)("meta",{name:"description",content:"Marvel information portal"}),(0,o.jsx)("title",{children:"Marvel information portal"})]}),(0,o.jsx)(y,{children:(0,o.jsx)(d,{})}),(0,o.jsxs)("div",{className:"char__content",children:[(0,o.jsx)(y,{children:(0,o.jsx)(_,{setRefApp:n,onFocusTo:c,onCharSelected:e=>{a(e)},charId:e})}),(0,o.jsxs)("div",{children:[(0,o.jsx)(y,{children:(0,o.jsx)(f,{setRefApp:n,onFocusTo:c,charId:e})}),(0,o.jsx)(y,{children:(0,o.jsx)(b,{})}),(0,o.jsx)("img",{className:"bg-decoration",src:C,alt:"vision"})]})]})]})}},1425:(e,a,s)=>{s.d(a,{A:()=>i});var r=s(5464);const t=s.p+"static/media/error.42292aa12b6bc303ce99.gif";var n=s(579);const c=r.Ay.img`
  display: block;
  width: 250px;
  height: 250px;
  object-fit: contain;
  margin: 0 auto;
`,i=()=>(0,n.jsx)(c,{src:t,alt:"error"})},9696:(e,a,s)=>{s.d(a,{U:()=>c});var r=s(5043);const t=s.p+"static/media/image_not_found.68c05359794e52060c4c.webp",n=s.p+"static/media/image_not_available.3be6a10cceeb4b54c3b4.webp",c=()=>{const{request:e,processing:a,setProcessing:s}=(()=>{const[e,a]=(0,r.useState)("waiting");return{request:(0,r.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json","Accept-Language":"en-US, en;q=0.9"};a("loading");try{const a=await fetch(e,{method:s,body:r,headers:t});if(!a.ok)throw new Error(`Could not fetch ${e}, status: ${a.status}`);return await a.json()}catch(n){const e=n.message.includes("status:")?n.message.match(/(?<=status:\s*)\d{3}/g)[0]:"000";throw a("error"+e),new Error(n)}}),[]),processing:e,setProcessing:a}})(),c="https://gateway.marvel.com:443/v1/public/",i="apikey=fa6f60847fe3eef1265fb35542cf4dd5",o=1564,l=196,h=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;if(a>1563)return[];try{return(await e(`${c}characters?limit=${s}&offset=${a}&${i}`)).data.results.map(d)}catch(r){return[]}},d=e=>{const{id:a,name:s,description:r,thumbnail:c,urls:i}=e;return{id:a,name:s,description:r,thumbnail:c.path.includes("image_not_available")?t:c.path.includes("4c002e0305708")?n:`${c.path}.${c.extension}`,homepage:i[0].url,wiki:i[1].url,comics:e.comics.items}},m=e=>{var a;const{id:s,title:r,description:t,pageCount:n,thumbnail:c,prices:i}=e;return{id:s,title:r,description:t||"The description is missing",pageCount:n?`${n} p.`:"No information about the number of pages",thumbnail:`${c.path}.${c.extension}`,language:(null===(a=e.textObjects[0])||void 0===a?void 0:a.language)||"en-us",price:i[0].price?`${i[0].price} $`:"not available"}};return{charsMarvel:o,comicsMarvel:1e3,offsetCharsBeginMarvel:l,processing:a,setProcessing:s,getCharacter:async a=>{try{const s=await e(`${c}characters/${a}?${i} `);return s?d(s.data.results[0]):null}catch(s){return null}},getCharacterByName:async a=>{try{return(await e(`${c}characters?name=${a}&${i}`)).data.results.map(d)}catch(s){return[]}},getAllCharacters:h,getRandomCharacters:async e=>{const a=Math.floor(1358*Math.random()+l);try{return await h(a,e)}catch(s){return[]}},getAllComics:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;try{return(await e(`${c}comics?orderBy=issueNumber&limit=${s}&offset=${a}&${i}`)).data.results.map(m)}catch(r){return[]}},getComic:async a=>{try{const s=await e(`${c}comics/${a}?${i}`);return s?m(s.data.results[0]):[]}catch(s){return[]}}}}}}]);
//# sourceMappingURL=768.384d2948.chunk.js.map