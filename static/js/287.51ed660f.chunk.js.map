{"version":3,"file":"static/js/287.51ed660f.chunk.js","mappings":"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","sources":["utils/setContent.js","components/errorMessage/ErrorMessage.js","components/appBanner/AppBanner.js","components/comicsList/ComicsList.js","components/pages/ComicsPage.js","hooks/http.hook.js","services/MarvelService.js"],"sourcesContent":["import Spinner from \"../components/spinner/Spinner\"\r\nimport ErrorMessage from '../components/errorMessage/ErrorMessage';\r\n\r\nconst setContent = (processing, Component, data) => {\r\n\r\n    switch (processing.replace(/\\d/g, '')) {\r\n        case 'waiting':\r\n            return <Spinner />\r\n        case 'loading':\r\n            return <Spinner />\r\n        case 'confirmed':\r\n            return <Component data={data} />\r\n        case 'error':\r\n            return <ErrorMessage />\r\n        default:\r\n            throw new Error('Unexpected process state')\r\n    }\r\n}\r\n\r\nexport default setContent","import styled from 'styled-components';\r\nimport imgError from \"./error.gif\"\r\n\r\nconst ErrorImg = styled.img`\r\n  display: block;\r\n  width: 250px;\r\n  height: 250px;\r\n  object-fit: contain;\r\n  margin: 0 auto;\r\n`\r\n\r\nconst ErrorMessage = () => {\r\n    return (\r\n        <ErrorImg src={imgError} alt=\"error\" />\r\n    )\r\n}\r\n\r\nexport default ErrorMessage","import './appBanner.scss';\nimport avengers from '../../resources/img/Avengers.png';\nimport avengersLogo from '../../resources/img/Avengers_logo.png';\n\nconst AppBanner = () => {\n    return (\n        <div className=\"app__banner\">\n            <img src={avengers} alt=\"Avengers\"/>\n            <div className=\"app__banner-text\">\n                New comics every week!<br/>\n                Stay tuned!\n            </div>\n            <img src={avengersLogo} alt=\"Avengers logo\"/>\n        </div>\n    )\n}\n\nexport default AppBanner;","import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom'\nimport { useMarvelService } from '../../services/MarvelService';\nimport setContent from '../../utils/setContent';\n\nimport './comicsList.scss';\n\nconst ComicsList = () => {\n    const [comics, setComics] = useState([]);\n    const [offset, setOffset] = useState(0);\n\n    const { processing, setProcessing, getAllComics, comicsMarvel } = useMarvelService();\n\n    useEffect(() => {\n        onRequest();\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n        [])\n\n    const onRequest = () => {\n\n        getAllComics(offset)\n            .then(onComicsListLoaded)\n    }\n\n    const onComicsListLoaded = (newComics) => {\n        setComics(comics => [...comics,\n        ...newComics.filter(obj1 => comics.findIndex(obj2 => (obj2.id === obj1.id)) < 0)])\n        setOffset(offset + 8)\n\n        setProcessing('confirmed')\n    }\n\n    const viewList = (comics) => {\n        const cardsComics = comics.map(comic => {\n            const { id, title, thumbnail, price } = comic\n\n            return (\n                <li className=\"comics__item\" key={id}>\n                    <Link to={`/reactGLO2025_Marvel/comics/${id}`}>\n                        <img src={thumbnail} alt={title} className=\"comics__item-img\" />\n                        <div className=\"comics__item-name\">{title}</div>\n                        <div className=\"comics__item-price\">{price}</div>\n                    </Link>\n                </li>\n            )\n        })\n        return (\n            <ul className=\"comics__grid\">\n                {cardsComics}\n            </ul>\n        )\n    }\n\n    const setContentCust = (processing) => {\n\n        switch (processing) {\n            case 'confirmed':\n                return null\n            case 'error429':\n                return (<span className=\"char__error_message\">You have exceeded your rate limit.  Please try again later.</span>)\n            default:\n                return setContent(processing)\n        }\n    }\n\n    const classButton = `button ${processing === 'loading' ? 'button__secondary' : 'button__main'} button__long`\n    const styleButton = processing === 'loading' ? { width: 'unset' } : {}\n\n    return (\n        <div className=\"comics__list\">\n            {viewList(comics)}\n            {setContentCust(processing)}\n            {(processing === 'error429' || processing === 'loading' || offset > comicsMarvel - 1) ? null : (\n                <button\n                    className={classButton}\n                    onClick={onRequest}\n                    style={styleButton}\n                >\n                    <div className=\"inner\">load more</div>\n                </button>\n            )}\n        </div>\n    )\n}\n\nexport default ComicsList","import { Helmet } from \"react-helmet\";\r\n\r\nimport AppBanner from \"../appBanner/AppBanner\";\r\nimport CommicList from \"../comicsList/ComicsList\";\r\n\r\nconst ComicsPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta\r\n                    name=\"description\"\r\n                    content=\"Page with list of Marvel comics\"\r\n                />\r\n                <title>Marvel Comics</title>\r\n            </Helmet>\r\n            <AppBanner />\r\n            <CommicList />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ComicsPage","import { useState, useCallback } from \"react\"\r\n\r\nexport const useHttp = () => {\r\n    const [processing, setProcessing] = useState('waiting')\r\n\r\n    const request = useCallback(\r\n        async (url,\r\n            method = 'GET',\r\n            body = null,\r\n            headers = {\r\n                'Content-Type': 'application/json',\r\n                'Accept-Language': 'en-US, en;q=0.9'\r\n            }) => {\r\n\r\n            setProcessing('loading')\r\n\r\n            try {\r\n                const response = await fetch(url, { method, body, headers })\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Could not fetch ${url}, status: ${response.status}`)\r\n                }\r\n\r\n                const data = await response.json()\r\n\r\n                //setProcessing('confirmed') -  устанавливаем \"вручную\" после обработки data в цепочке обработки then\r\n\r\n                return data\r\n\r\n            } catch (e) {\r\n                const codeError = e.message.includes('status:') ? e.message.match(/(?<=status:\\s*)\\d{3}/g)[0] : '000'\r\n\r\n                setProcessing('error' + codeError)\r\n\r\n                throw new Error(e);\r\n            }\r\n        }, [])\r\n\r\n    return { request, processing, setProcessing }\r\n}\r\n","import { useHttp } from '../hooks/http.hook'\r\n\r\nimport imgNotFound from \"../resources/img/image_not_found.webp\"\r\nimport imgNotAvailbale from \"../resources/img/image_not_available.webp\"\r\n\r\nexport const useMarvelService = () => {\r\n    const { request, processing, setProcessing } = useHttp()\r\n\r\n    const _apiBase = 'https://gateway.marvel.com:443/v1/public/'\r\n    const _apiKey = `apikey=${process.env.REACT_APP_MARVEL_API_KEY}`\r\n\r\n    const charsMarvel = 1564 // на 16.02.2025\r\n    const offsetCharsBeginMarvel = 196\r\n    const comicsMarvel = 1000 // ???\r\n\r\n    const getAllCharacters = async (offset = offsetCharsBeginMarvel, limit = 9) => {\r\n        if (offset > charsMarvel - 1) return []\r\n\r\n        try {\r\n            const res = await request(`${_apiBase}characters?limit=${limit}&offset=${offset}&${_apiKey}`)\r\n            return res.data.results.map(_transformCharacter)\r\n        } catch (e) {\r\n            return []\r\n        }\r\n    }\r\n\r\n    const getCharacter = async (id) => {\r\n        try {\r\n            const res = await request(`${_apiBase}characters/${id}?${_apiKey} `)\r\n            return res ? _transformCharacter(res.data.results[0]) : null\r\n        } catch (e) {\r\n            return null\r\n        }\r\n    }\r\n\r\n    const getCharacterByName = async (name) => {\r\n        try {\r\n            const res = await request(`${_apiBase}characters?name=${name}&${_apiKey}`);\r\n            return res.data.results.map(_transformCharacter);\r\n        } catch (e) {\r\n            return []\r\n        }\r\n    }\r\n\r\n    const getAllComics = async (offset = 0, limit = 8) => {\r\n        try {\r\n            const res = await request(`${_apiBase}comics?orderBy=issueNumber&limit=${limit}&offset=${offset}&${_apiKey}`)\r\n            return res.data.results.map(_transformComics)\r\n        } catch (e) {\r\n            return []\r\n        }\r\n    }\r\n\r\n    const getComic = async (id) => {\r\n        try {\r\n            const res = await request(`${_apiBase}comics/${id}?${_apiKey}`)\r\n            return res ? _transformComics(res.data.results[0]) : []\r\n        } catch (e) {\r\n            return []\r\n        }\r\n    }\r\n\r\n    const _transformCharacter = (char) => {\r\n        const { id, name, description, thumbnail, urls } = char\r\n\r\n        const srcThumbnail = thumbnail.path.includes('image_not_available') ? imgNotFound\r\n            : thumbnail.path.includes('4c002e0305708') ? imgNotAvailbale\r\n                : `${thumbnail.path}.${thumbnail.extension}`\r\n\r\n        return {\r\n            id,\r\n            name,\r\n            description: description,\r\n            thumbnail: srcThumbnail,\r\n            homepage: urls[0].url,\r\n            wiki: urls[1].url,\r\n            comics: char.comics.items,\r\n        }\r\n    }\r\n\r\n    const _transformComics = (comics) => {\r\n        const { id, title, description, pageCount, thumbnail, prices } = comics\r\n\r\n        return {\r\n            id,\r\n            title,\r\n            description: description || \"The description is missing\",\r\n            pageCount: pageCount\r\n                ? `${pageCount} p.`\r\n                : \"No information about the number of pages\",\r\n            thumbnail: `${thumbnail.path}.${thumbnail.extension}`,\r\n            language: comics.textObjects[0]?.language || \"en-us\",\r\n            price: prices[0].price\r\n                ? `${prices[0].price} $`\r\n                : \"not available\",\r\n        }\r\n    }\r\n\r\n    return {\r\n        charsMarvel, comicsMarvel, offsetCharsBeginMarvel,\r\n        processing, setProcessing,\r\n        getCharacter, getCharacterByName, getAllCharacters,\r\n        getAllComics, getComic\r\n    }\r\n}\r\n"],"names":["setContent","processing","Component","data","replace","_jsx","Spinner","ErrorMessage","Error","ErrorImg","styled","img","src","imgError","alt","AppBanner","_jsxs","className","children","avengers","avengersLogo","ComicsList","comics","setComics","useState","offset","setOffset","setProcessing","getAllComics","comicsMarvel","useMarvelService","useEffect","onRequest","then","onComicsListLoaded","newComics","filter","obj1","findIndex","obj2","id","classButton","styleButton","width","cardsComics","map","comic","title","thumbnail","price","Link","to","viewList","setContentCust","onClick","style","ComicsPage","_Fragment","Helmet","name","content","CommicList","request","useHttp","useCallback","async","url","method","arguments","length","undefined","body","headers","response","fetch","ok","status","json","e","codeError","message","includes","match","_apiBase","_apiKey","_transformCharacter","char","description","urls","path","imgNotFound","imgNotAvailbale","extension","homepage","wiki","items","_transformComics","_comics$textObjects$","pageCount","prices","language","textObjects","charsMarvel","offsetCharsBeginMarvel","getCharacter","res","results","getCharacterByName","getAllCharacters","limit","getComic"],"sourceRoot":""}